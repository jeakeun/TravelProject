# ==========================================================
# Application 기본 설정
# ==========================================================
spring.application.name=community_java
server.port=8080

# ==========================================================
# Database 설정 (MySQL 연동)
# ==========================================================
# jdbc-url이 아니라 그냥 url로 변경되었습니다.
spring.datasource.url=jdbc:mysql://3.37.160.108:3306/travel?useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true&characterEncoding=UTF-8
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:root}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ==========================================================
# JPA / Hibernate 설정
# ==========================================================
spring.jpa.open-in-view=false
spring.jpa.show-sql=false
# 변경: 직접 생성한 테이블 구조를 보호하기 위해 none으로 설정 (DDL 에러 해결)
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
# 추가: 레거시 테이블 구조와 매핑 시 명명 규칙 유지
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# ==========================================================
# MyBatis 설정
# ==========================================================
mybatis.mapper-locations=classpath:mappers/*.xml
mybatis.type-aliases-package=kr.hi.travel_community.entity;kr.hi.travel_community.model.dto
mybatis.configuration.map-underscore-to-camel-case=true
# 추가: 쿼리 결과가 null일 때도 빈 객체 생성 방지 및 로그 최적화
mybatis.configuration.call-setters-on-nulls=true

# ==========================================================
# 파일 업로드 및 서버 외부 저장 경로 (핵심)
# ==========================================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# file.upload-dir=C:/travel_contents/uploads/pic/
file.upload-dir=/home/uploads/

# ==========================================================
# MVC 및 인코딩 설정
# ==========================================================
spring.mvc.pathmatch.matching-strategy=ant_path_matcher
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true
spring.thymeleaf.check-template-location=false
server.servlet.session.cookie.same-site=lax

# ==========================================
# JWT (인증) 및 보안 설정
# ==========================================
jwt.secret=MySuperLongSecretKey_ChangeMe_AtLeast_32Chars_ExtraLength_2026
jwt.token-validity-in-seconds=3600
jwt.refresh-token-validity-in-seconds=1209600

# [카카오 로그인] REST API 키(토큰 교환용), Redirect URI, Client Secret(콘솔에서 사용 시 필수)
# 로컬 개발 편의를 위해 직접 값 지정 (운영 환경에서는 환경변수/별도 프로필로 분리 권장)
kakao.rest-api-key=ea03e5c214ce058f26b22ad4af0ca310
kakao.redirect-uri=http://localhost:3000/kakao-callback
kakao.client-secret=DVywOYFbh0fNFdI0Je79hpT01ChYqgE8

# ==========================================
# 로그 설정 (깔끔한 콘솔 유지)
# ==========================================
logging.level.kr.hi.travel_community=INFO
logging.level.org.hibernate.SQL=ERROR
logging.level.org.hibernate.orm.jdbc.bind=ERROR

# ==========================================
# HTTP Header Size 설정 (콘솔 에러 해결)
# ==========================================
server.max-http-header-size=16384